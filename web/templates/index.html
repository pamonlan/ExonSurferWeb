
{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static%}


{% block header %}

<!-- Main jumbotron for a primary marketing message or call to action -->
<div class="jumbotron">
  <div class="container">
    <h1 class="display-3" align="center"><b>ExonSurfer</b></h1>
    <p align="center">A Web-tool for Exon-specific Primer Design</p>
  </div>
</div>
{% endblock header %}

{% block body %}

<div class="container">
  <!-- About ExonSurfer -->
  <div class="row gy-5">
    <div class="w-100" style="padding-top: 6%;"></div>
    <div class="col-lg">
      {% if messages %}
          <div>
              <ul>
              {% for message in messages %}
              <div class="alert alert-warning alert-dismissible fade show" role="alert">
                      <strong>{{message | safe}}</strong>
                      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                      </button>
              </div>
              {% endfor %}
              </ul>
          </div>  
        {% endif %}
      <h2>About ExonSurfer</h2>
      <p align="left">ExonSurfer is a web-tool designed for the design of high specific transcript primers, using the Ensembl database and the blastn algorithm in order to identify and find the proper exon binding of the transcripts.</p>
      <p align="left">The program simplifies and streamlines the primer design process, while also providing the user with a variety of options to customize their primer design to best suit their needs. Additionally, the use of Ensembl database and the blastn algorithm ensures high specificity and low non-specific binding of the primers, making ExonSurfer an essential tool for transcript-specific detection.</p>
    </div>
  </div>
</div>

<div class="container">
  <!-- Example row of columns -->
  <div class="row gy-5">

    <div class="w-100" style="padding-top: 6%;"></div>
    <div class="col-lg">
      <h2>Design Primers</h2>
      <p align="left">Create now your primers for your favorite species and gene using ExonSurfer.</p>
      <p align="left">The program offers fast and accurate primer design, with user specified parameters like primer size, GC content, etc, and a user-friendly web interface to setup search options and visualize results.</p>
      <p></p>

      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
          <div class="form-group">
            <p><label for="species">Select Species</label></p>

            <select name="species" id="selectSpecies">
              <option name="species" value="homo_sapiens">Homo sapiens</option>
              <option name="species" value="mus_musculus">Mus musculus</option>
              <option name="species" value="rattus_norvegicus">Rattus norvegicus</option>
            </select>
          
          </div>
          <div id="speciesInfo">
            <div class="form-group" id="homo_sapiens" style="display: block;">
              <label for="symbol">Select Human Gene Symbol</label>
              <select class="chosen" style="width:350px;" name="human_symbol" > 
              {% for value,key in form.human_symbol.field.choices %}
                  <option name="human_symbol" value="{{value}}">{{key}}</option>
              {%endfor%}
            </select>
            </div>

            <div class="form-group" id="rattus_norvegicus" style="display: none;">
              <label for="symbol">Select Rat Gene Name</label>
              <select class="chosen" style="width:350px;" name="rat_symbol" > 
              {% for value,key in form.rat_symbol.field.choices %}
                  <option name="rat_symbol" value="{{value}}">{{key}}</option>
              {%endfor%}
            </select>
            </div>

            <div class="form-group" id="mus_musculus" style="display: none;">
              <label for="symbol">Select Mouse Gene Symbol</label>
              <select class="chosen"  style="width:350px;" name="mouse_symbol" > 
              {% for value,key in form.mouse_symbol.field.choices %}
                  <option name="mouse_symbol" value="{{value}}">{{key}}</option>
              {%endfor%}
            </select>
            </div>
          </div>
        </div>
      <button type="submit" style="background-color: #355C8E" class="btn btn-primary btn-block">Submit Analysis</button>
      </form>
    </div>

    <div class="row gy-5">

      <div class="w-100" style="padding-top: 6%;"></div>
      <div class="col-lg">
        <p><h3><strong>Features:</strong></h3></p>
        <ul>
          <li>User-friendly web-based options for setting search parameters and visualizing results.</li>
          <li>Fully automated workflows that generate highly specific primers with low non-specific binding.</li>
          <li>Requires Python 3, Docker or Docker-podman, and PyEnsembl.</li>
          <li>User guide, setup guide, and documentation available for assistance.</li>
          <li>Open-source and licensed under the MIT license.</li>
        </ul>
        <p><strong>Citation:</strong></p>
        <blockquote>
          Monfort-Lanzas P. & Rusu-Hutu C. et al. (2022) ExonSurfer: A web tool for designing highly specific transcript primers using the ExonSurfer Python package and Ensembl database. <em>Journal </em>. doi:10.1234/jcb.2022.1234
        </blockquote>
      </div>
    </div>
  </div>
</div>



{% endblock body %}


{% block js %}
<script src="{% static 'index/js/form.js'%}"></script>

<script type="text/javascript">
  const selectSpecies = document.querySelector("#selectSpecies");
  const speciesInfo = document.querySelector("#speciesInfo");
  const speciesDivs = speciesInfo.children;

  selectSpecies.addEventListener("change", function() {
    const selectedValue = selectSpecies.value;

    for (let i = 0; i < speciesDivs.length; i++) {
      const speciesDiv = speciesDivs[i];
      if (speciesDiv.id === selectedValue) {
        speciesDiv.style.display = "block";
      } else {
        speciesDiv.style.display = "none";
      }
    }
  });

</script>
{% endblock js %}
